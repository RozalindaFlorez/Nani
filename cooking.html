<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bite Me Beautiful</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico" />
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --pink-light: #ffe5ec;
      --pink-medium: #ff99c8;
      --pink-dark: #d6336c;
      --cream: #fffafc;
      --shadow-pink: rgba(255, 153, 200, 0.5);
      --sparkle-color: #fff1f3;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(to bottom, var(--pink-light), var(--cream));
      color: var(--pink-dark);
      cursor: none;
      overflow-x: hidden;
      min-height: 100vh;
    }
    nav {
      position: fixed;
      top: 0; left: 0; right: 0;
      height: 100px;
      background: var(--pink-medium);
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 30px;
      z-index: 1002;
      box-shadow: 0 3px 15px var(--shadow-pink);
    }
    nav a {
      text-decoration: none;
      color: white;
      font-size: 2.5rem;
      width: 75px;
      height: 75px;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 50%;
      background: var(--pink-dark);
      box-shadow: 0 0 15px var(--shadow-pink);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    nav a:hover {
      transform: scale(1.3);
      box-shadow: 0 0 25px var(--pink-light);
    }
    .container {
      max-width: 1000px;
      margin: 140px auto 60px;
      padding: 1rem;
      text-align: center;
    }
    h1 {
      font-family: 'Great Vibes', cursive;
      font-size: 4rem;
      color: var(--pink-dark);
      margin-bottom: 2rem;
      animation: bounceIn 1s ease-out;
    }
    @keyframes bounceIn {
      0% { transform: scale(0.6); opacity: 0; }
      60% { transform: scale(1.1); opacity: 1; }
      100% { transform: scale(1); }
    }
    .category-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 2rem;
    }
    .category-buttons button {
      background: var(--pink-dark);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: 0 0 10px var(--shadow-pink);
      transition: transform 0.2s, background 0.2s;
    }
    .category-buttons button:hover,
    .category-buttons button.active {
      transform: scale(1.1);
      background: var(--pink-medium);
      box-shadow: 0 0 15px var(--pink-light);
    }
    .recipes {
      display: none;
      margin-top: 2rem;
      text-align: left;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    .recipes.active {
      display: block;
    }
    .recipe-item {
      margin: 1rem 0;
      cursor: pointer;
      font-weight: bold;
      font-size: 1.2rem;
      outline-offset: 3px;
      padding: 4px;
      border-radius: 6px;
      transition: background 0.2s, color 0.2s;
    }
    .recipe-item:hover,
    .recipe-item:focus {
      background: var(--pink-medium);
      color: white;
      outline: none;
    }
    .recipe-card {
      background: #fff0f6;
      border: 2px dashed var(--pink-dark);
      padding: 1.5rem;
      margin-top: 1.5rem;
      border-radius: 16px;
      display: none;
      box-shadow: 0 0 10px rgba(255, 111, 145, 0.3);
      text-align: left;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      position: relative;
    }
    .recipe-card.show {
      display: block;
      animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .recipe-card h2 {
      margin-bottom: 0.5rem;
      font-family: 'Great Vibes', cursive;
      font-size: 2.4rem;
      color: var(--pink-dark);
    }
    .recipe-card .country {
      font-size: 1rem;
      margin-bottom: 0.5rem;
      font-style: italic;
    }
    .recipe-card .prep-time {
      font-style: italic;
      margin-bottom: 0.5rem;
      color: #aa5577;
    }
    .recipe-card ul {
      list-style: circle;
      margin-left: 1.5rem;
      margin-bottom: 1rem;
    }
    .recipe-card button {
      margin-top: 1rem;
      background: var(--pink-dark);
      color: white;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 10px;
      cursor: pointer;
      margin-right: 10px;
      font-weight: 700;
      font-size: 1rem;
      transition: background 0.3s;
    }
    .recipe-card button:hover {
      background: var(--pink-medium);
    }

    /* Cooking Game styles */
    #gameContainer {
      max-width: 1000px;
      margin: 50px auto 100px;
      text-align: center;
      border: 3px solid var(--pink-dark);
      border-radius: 20px;
      padding: 1rem;
      background: #fff0f6;
      box-shadow: 0 0 20px rgba(255, 111, 145, 0.4);
    }
    #gameContainer h2 {
      font-family: 'Great Vibes', cursive;
      font-size: 2.8rem;
      margin-bottom: 1rem;
      color: var(--pink-dark);
    }
    #ingredients, #actions, #cooking-area {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      min-height: 50px;
      padding: 10px;
      border: 2px dashed var(--pink-dark);
      border-radius: 12px;
      background: var(--pink-light);
      justify-content: center;
      margin-bottom: 1rem;
    }
    #ingredients div, #actions div, #cooking-area div {
      background: var(--pink-dark);
      color: white;
      padding: 8px 14px;
      border-radius: 14px;
      cursor: grab;
      user-select: none;
      font-weight: 600;
      min-width: 110px;
      text-align: center;
      box-shadow: 0 0 10px var(--shadow-pink);
      transition: background 0.2s, box-shadow 0.3s;
    }
    #ingredients div:focus, #actions div:focus, #cooking-area div:focus {
      outline: 3px solid var(--pink-medium);
      background: var(--pink-medium);
    }
    #ingredients div.dragging, #actions div.dragging, #cooking-area div.dragging {
      opacity: 0.5;
      cursor: grabbing;
      box-shadow: 0 0 20px var(--pink-medium);
    }
    #cooking-area div.cooked-step.wrong {
      background: #aa3366;
      box-shadow: 0 0 15px #aa3366;
      animation: shake 0.3s ease-in-out;
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-6px); }
      40%, 80% { transform: translateX(6px); }
    }
    #instructions {
      font-style: italic;
      margin-bottom: 1rem;
      min-height: 40px;
      color: var(--pink-dark);
    }
    #result-message {
      font-weight: 700;
      min-height: 30px;
      margin-bottom: 1rem;
    }
    #reset-game {
      background: var(--pink-dark);
      color: white;
      border: none;
      padding: 0.7rem 1.5rem;
      font-size: 1.1rem;
      border-radius: 14px;
      cursor: pointer;
      box-shadow: 0 0 15px var(--shadow-pink);
      transition: background 0.3s;
    }
    #reset-game:hover {
      background: var(--pink-medium);
      box-shadow: 0 0 25px var(--pink-light);
    }

    /* Cursor Glow and Sparkles */
    .cursor-glow {
      position: fixed;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      pointer-events: none;
      mix-blend-mode: screen;
      background: radial-gradient(circle, var(--pink-medium) 0%, transparent 70%);
      filter: drop-shadow(0 0 10px var(--pink-medium));
      transform: translate(-50%, -50%);
      z-index: 1004;
      transition: left 0.05s ease, top 0.05s ease;
    }
    .sparkle {
      position: fixed;
      pointer-events: none;
      width: 7px;
      height: 7px;
      background: var(--sparkle-color);
      border-radius: 50%;
      filter: drop-shadow(0 0 3px white);
      opacity: 0;
      animation: sparkleAnim 1500ms linear forwards;
      z-index: 1005;
      mix-blend-mode: screen;
    }
    @keyframes sparkleAnim {
      0% { opacity: 1; transform: translate(0, 0) scale(1); }
      100% { opacity: 0; transform: translate(15px, -30px) scale(0.3); }
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html" aria-label="Home">üè†</a>
    <a href="art.html" aria-label="Art">üé®</a>
    <a href="games.html" aria-label="Games">üéÆ</a>
    <a href="tech.html" aria-label="Tech">üíª</a>
    <a href="books.html" aria-label="Books">üìñ</a>
  </nav>
  <div class="container" role="main">
    <h1>Bite Me Beautiful</h1>
    <div class="category-buttons" role="tablist" aria-label="Recipe categories">
      <button role="tab" aria-selected="true" tabindex="0" class="active" onclick="showCategory('breakfast')">üç≥ Breakfast</button>
      <button role="tab" aria-selected="false" tabindex="-1" onclick="showCategory('lunch')">ü•™ Lunch</button>
      <button role="tab" aria-selected="false" tabindex="-1" onclick="showCategory('dinner')">üçΩÔ∏è Dinner</button>
      <button role="tab" aria-selected="false" tabindex="-1" onclick="showCategory('dessert')">üç∞ Dessert</button>
      <button role="tab" aria-selected="false" tabindex="-1" onclick="showCategory('mealprep')">ü•ó Meal Prep</button>
    </div>

    <div id="recipeSection" aria-live="polite" aria-atomic="true"></div>

    <section id="recipeCard" class="recipe-card" tabindex="-1" aria-label="Recipe details" aria-hidden="true">
      <h2 id="recipeName"></h2>
      <div class="country" id="recipeCountry"></div>
      <div class="prep-time" id="recipePrepTime"></div>
      <h3>Ingredients:</h3>
      <ul id="recipeIngredients"></ul>
      <h3>Instructions:</h3>
      <ul id="recipeInstructions"></ul>
      <button id="printRecipe" aria-label="Print this recipe">üñ®Ô∏è Print</button>
      <button id="saveRecipe" aria-label="Save this recipe">üíæ Save</button>
    </section>
  </div>

  <!-- Cooking Game -->
  <div id="gameContainer" aria-label="Cooking game: Prepare Jamaican Curry Chicken">
    <h2>üç≥ Cooking Game: Jamaican Curry Chicken</h2>
    <p id="instructions">Drag the ingredients and steps in the correct order into the cooking area below to prepare the dish.</p>
    <div id="ingredients" aria-label="Ingredients" role="list"></div>
    <div id="actions" aria-label="Cooking steps" role="list"></div>
    <div id="cooking-area" aria-label="Cooking area (drop ingredients and steps here)" role="list"></div>
    <div id="result-message" aria-live="polite" aria-atomic="true"></div>
    <button id="reset-game" aria-label="Reset cooking game">Reset Game</button>
  </div>

  <div class="cursor-glow" id="cursorGlow"></div>

  <script>
    // Recipe data
    const recipesData = {
      breakfast: [
        { name: "Japanese Morning Set: Tamagoyaki, Rice, Spinach Gomaae & Pickles", country: "Japan üáØüáµ", prepTime: "25 min", ingredients: ["Tamagoyaki eggs", "Steamed rice", "Spinach", "Sesame seeds", "Pickles"], instructions: ["Make tamagoyaki.", "Cook rice.", "Prepare spinach gomaae.", "Serve with pickles."] },
        { name: "Mang√∫ con los Tres Golpes", country: "Dominican Republic üá©üá¥", prepTime: "30 min", ingredients: ["Green plantains", "Red onions", "Queso frito", "Salami", "Eggs"], instructions: ["Boil plantains.", "Mash plantains.", "Fry salami and queso.", "Serve with eggs."] },
        { name: "Cuban Toast with Butter and Caf√© con Leche", country: "Cuba üá®üá∫", prepTime: "15 min", ingredients: ["Cuban bread", "Butter", "Coffee", "Milk"], instructions: ["Toast bread.", "Spread butter.", "Prepare caf√© con leche.", "Serve together."] },
        { name: "Pain Perdu (French Toast) with Fresh Fruit Garnish", country: "France üá´üá∑", prepTime: "20 min", ingredients: ["Bread slices", "Eggs", "Milk", "Sugar", "Fresh fruit"], instructions: ["Mix eggs and milk.", "Dip bread slices.", "Cook on pan.", "Serve with fruit."] },
        { name: "Eggs Benedict", country: "USA üá∫üá∏", prepTime: "30 min", ingredients: ["English muffins", "Eggs", "Canadian bacon", "Hollandaise sauce"], instructions: ["Toast muffins.", "Poach eggs.", "Cook bacon.", "Assemble and serve with hollandaise."] }
      ],
      lunch: [
        { name: "Chicken Tortilla Soup", country: "Mexico üá≤üáΩ", prepTime: "45 min", ingredients: ["Chicken", "Broth", "Onion", "Tomatoes", "Tortilla strips", "Avocado", "Cheese"], instructions: ["Cook chicken in broth with onion and tomatoes.", "Shred chicken.", "Serve soup topped with tortilla strips, avocado, and cheese."] },
        { name: "Veggie Sushi Bowl", country: "Japan üáØüáµ", prepTime: "30 min", ingredients: ["Cooked sushi rice", "Avocado", "Cucumber", "Carrots", "Soy sauce", "Pickled ginger"], instructions: ["Prepare sushi rice.", "Chop veggies.", "Assemble bowl with rice and veggies.", "Drizzle soy sauce and add pickled ginger."] },
        { name: "Quinoa Salad with Roasted Vegetables", country: "Peru üáµüá™", prepTime: "35 min", ingredients: ["1 cup quinoa", "Mixed vegetables", "Olive oil", "Lemon juice", "Feta cheese"], instructions: ["Cook quinoa.", "Roast vegetables.", "Mix quinoa with veggies, olive oil, lemon juice, and feta."] },
        { name: "Mediterranean Falafel Wrap", country: "Lebanon üá±üáß", prepTime: "30 min", ingredients: ["Falafel balls", "Pita bread", "Lettuce", "Tomato", "Tahini sauce"], instructions: ["Cook falafel.", "Fill pita with falafel, lettuce, tomato.", "Drizzle tahini sauce."] }
      ],
      dinner: [
        { name: "Jamaican Curry Chicken", country: "Jamaica üáØüá≤", prepTime: "60 min", ingredients: ["Chicken", "Curry powder", "Onion", "Garlic", "Thyme", "Potatoes", "Coconut milk"], instructions: ["Season chicken.", "Saut√© onion and garlic.", "Add chicken and curry powder.", "Add potatoes and coconut milk.", "Simmer until cooked."] },
        { name: "Beef Stir Fry with Vegetables", country: "China üá®üá≥", prepTime: "40 min", ingredients: ["Beef strips", "Broccoli", "Bell peppers", "Soy sauce", "Ginger", "Garlic"], instructions: ["Slice beef.", "Stir fry beef with ginger and garlic.", "Add vegetables.", "Add soy sauce.", "Cook until veggies are tender."] }
      ],
      dessert: [
        { name: "Tres Leches Cake", country: "Mexico üá≤üáΩ", prepTime: "1 hr 30 min", ingredients: ["Sponge cake", "Evaporated milk", "Condensed milk", "Heavy cream", "Berries"], instructions: ["Bake sponge cake.", "Mix three milks.", "Pour milk mixture over cake.", "Top with whipped cream and berries."] },
        { name: "Mango Sticky Rice", country: "Thailand üáπüá≠", prepTime: "1 hr", ingredients: ["Sticky rice", "Coconut milk", "Sugar", "Mango"], instructions: ["Cook sticky rice.", "Mix coconut milk and sugar.", "Pour mixture over rice.", "Serve with sliced mango."] }
      ],
      mealprep: [
        { name: "Quinoa and Black Bean Bowl", country: "USA üá∫üá∏", prepTime: "40 min", ingredients: ["Quinoa", "Black beans", "Corn", "Avocado", "Lime"], instructions: ["Cook quinoa.", "Mix beans and corn.", "Assemble bowl with avocado and lime juice."] },
        { name: "Chicken Salad Wrap", country: "USA üá∫üá∏", prepTime: "25 min", ingredients: ["Cooked chicken", "Tortilla", "Lettuce", "Mayonnaise", "Celery"], instructions: ["Mix chicken with mayo and celery.", "Place on tortilla.", "Wrap and serve."] }
      ]
    };

    // State
    let currentCategory = 'breakfast';

    // Show category and render recipes
    function showCategory(category) {
      currentCategory = category;

      // Update button active states & ARIA
      const buttons = document.querySelectorAll('.category-buttons button');
      buttons.forEach(btn => {
        const isActive = btn.textContent.toLowerCase().includes(category);
        btn.classList.toggle('active', isActive);
        btn.setAttribute('aria-selected', isActive ? 'true' : 'false');
        btn.tabIndex = isActive ? 0 : -1;
      });

      const recipeSection = document.getElementById('recipeSection');
      recipeSection.innerHTML = ''; // clear old

      const recipes = recipesData[category];
      if (!recipes) {
        recipeSection.textContent = 'No recipes available.';
        return;
      }

      // Create recipes list container
      const list = document.createElement('div');
      list.className = 'recipes active';

      recipes.forEach((recipe, idx) => {
        const item = document.createElement('div');
        item.className = 'recipe-item';
        item.tabIndex = 0;
        item.role = 'button';
        item.setAttribute('aria-pressed', 'false');
        item.textContent = recipe.name;
        item.addEventListener('click', () => showRecipeCard(recipe));
        item.addEventListener('keydown', e => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            showRecipeCard(recipe);
          }
        });
        list.appendChild(item);
      });

      recipeSection.appendChild(list);

      // Hide recipe card if open
      closeRecipeCard();
    }

    // Show recipe details card
    function showRecipeCard(recipe) {
      const card = document.getElementById('recipeCard');
      card.setAttribute('aria-hidden', 'false');

      document.getElementById('recipeName').textContent = recipe.name;
      document.getElementById('recipeCountry').textContent = recipe.country;
      document.getElementById('recipePrepTime').textContent = `Prep time: ${recipe.prepTime}`;

      const ingredientsList = document.getElementById('recipeIngredients');
      ingredientsList.innerHTML = '';
      recipe.ingredients.forEach(ing => {
        const li = document.createElement('li');
        li.textContent = ing;
        ingredientsList.appendChild(li);
      });

      const instructionsList = document.getElementById('recipeInstructions');
      instructionsList.innerHTML = '';
      recipe.instructions.forEach((step, i) => {
        const li = document.createElement('li');
        li.textContent = `${i + 1}. ${step}`;
        instructionsList.appendChild(li);
      });

      card.classList.add('show');
      card.focus();
    }

    // Close recipe card
    function closeRecipeCard() {
      const card = document.getElementById('recipeCard');
      card.classList.remove('show');
      card.setAttribute('aria-hidden', 'true');
    }

    // Print recipe
    document.getElementById('printRecipe').addEventListener('click', () => {
      window.print();
    });

    // Save recipe to localStorage
    document.getElementById('saveRecipe').addEventListener('click', () => {
      const recipeName = document.getElementById('recipeName').textContent;
      const savedRecipes = JSON.parse(localStorage.getItem('savedRecipes') || '[]');
      if (!savedRecipes.includes(recipeName)) {
        savedRecipes.push(recipeName);
        localStorage.setItem('savedRecipes', JSON.stringify(savedRecipes));
        alert(`Recipe "${recipeName}" saved!`);
      } else {
        alert(`Recipe "${recipeName}" is already saved.`);
      }
    });

    // Initialize with breakfast recipes
    showCategory(currentCategory);

    // --- Cooking Game ---

    // Game Data (for Jamaican Curry Chicken)
    const gameIngredients = ["Chicken", "Curry powder", "Onion", "Garlic", "Thyme", "Potatoes", "Coconut milk"];
    const gameSteps = [
      "Season chicken.",
      "Saut√© onion and garlic.",
      "Add chicken and curry powder.",
      "Add potatoes and coconut milk.",
      "Simmer until cooked."
    ];

    const ingredientsContainer = document.getElementById('ingredients');
    const actionsContainer = document.getElementById('actions');
    const cookingArea = document.getElementById('cooking-area');
    const instructionsEl = document.getElementById('instructions');
    const resultMessage = document.getElementById('result-message');
    const resetBtn = document.getElementById('reset-game');

    // Helper: create draggable item div
    function createDraggableItem(text, type) {
      const div = document.createElement('div');
      div.textContent = text;
      div.setAttribute('draggable', 'true');
      div.tabIndex = 0;
      div.className = type === 'ingredient' ? 'ingredient-item' : 'action-item';
      div.setAttribute('role', 'listitem');
      div.dataset.type = type;
      return div;
    }

    // Populate ingredients and actions lists
    function populateGame() {
      ingredientsContainer.innerHTML = '';
      actionsContainer.innerHTML = '';
      cookingArea.innerHTML = '';
      resultMessage.textContent = '';
      instructionsEl.textContent = 'Drag the ingredients and steps in the correct order into the cooking area below to prepare the dish.';

      gameIngredients.forEach(ing => {
        const item = createDraggableItem(ing, 'ingredient');
        ingredientsContainer.appendChild(item);
      });
      gameSteps.forEach(step => {
        const item = createDraggableItem(step, 'action');
        actionsContainer.appendChild(item);
      });
    }

    // Drag and drop logic
    let draggedItem = null;

    function dragStart(e) {
      draggedItem = e.target;
      e.dataTransfer.effectAllowed = 'move';
      e.dataTransfer.setData('text/plain', draggedItem.textContent);
      setTimeout(() => draggedItem.classList.add('dragging'), 0);
    }
    function dragEnd(e) {
      if (draggedItem) draggedItem.classList.remove('dragging');
      draggedItem = null;
    }
    function dragOver(e) {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
    }
    function drop(e) {
      e.preventDefault();
      if (!draggedItem) return;

      // Prevent duplicates in cooking area
      const existingTexts = Array.from(cookingArea.children).map(el => el.textContent);
      if (existingTexts.includes(draggedItem.textContent)) {
        alert('This item is already added to the cooking area.');
        return;
      }

      // Clone dragged item and add to cooking area
      const clone = draggedItem.cloneNode(true);
      clone.classList.add('cooked-step');
      clone.setAttribute('draggable', 'true');
      clone.tabIndex = 0;

      // Remove drag handlers from original so user can still drag original
      clone.addEventListener('dragstart', dragStartCooking);
      clone.addEventListener('dragend', dragEnd);

      // Add keyboard support for removing with Delete or Backspace
      clone.addEventListener('keydown', e => {
        if (e.key === 'Delete' || e.key === 'Backspace') {
          cookingArea.removeChild(clone);
          checkOrder();
        }
      });

      cookingArea.appendChild(clone);

      checkOrder();
    }

    // Cooking area drag handlers (for reordering)
    let draggedCookingItem = null;

    function dragStartCooking(e) {
      draggedCookingItem = e.target;
      e.dataTransfer.effectAllowed = 'move';
      e.dataTransfer.setData('text/plain', draggedCookingItem.textContent);
      setTimeout(() => draggedCookingItem.classList.add('dragging'), 0);
    }
    function dragEndCooking(e) {
      if (draggedCookingItem) draggedCookingItem.classList.remove('dragging');
      draggedCookingItem = null;
    }
    function dragOverCooking(e) {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
      const target = e.target;
      if (target && target !== draggedCookingItem && target.parentNode === cookingArea) {
        const rect = target.getBoundingClientRect();
        const next = (e.clientY - rect.top) / (rect.bottom - rect.top) > 0.5;
        cookingArea.insertBefore(draggedCookingItem, next ? target.nextSibling : target);
      }
    }
    function dropCooking(e) {
      e.preventDefault();
      draggedCookingItem = null;
      checkOrder();
    }

    // Check if the cooking area steps are in correct order
    function checkOrder() {
      const cookedItems = Array.from(cookingArea.children);
      let isCorrect = true;
      for (let i = 0; i < cookedItems.length; i++) {
        if (i >= gameIngredients.length) { // steps part
          const stepIndex = i - gameIngredients.length;
          if (cookedItems[i].textContent !== gameSteps[stepIndex]) {
            cookedItems[i].classList.add('wrong');
            isCorrect = false;
          } else {
            cookedItems[i].classList.remove('wrong');
          }
        } else { // ingredients part
          if (cookedItems[i].textContent !== gameIngredients[i]) {
            cookedItems[i].classList.add('wrong');
            isCorrect = false;
          } else {
            cookedItems[i].classList.remove('wrong');
          }
        }
      }

      if (cookedItems.length === gameIngredients.length + gameSteps.length && isCorrect) {
        resultMessage.textContent = "üéâ Perfect! You've prepared the Jamaican Curry Chicken correctly! Here's the recipe:";
        showCategory('dinner');
        setTimeout(() => {
          // Auto open Jamaican Curry Chicken recipe
          const jamaicanRecipe = recipesData.dinner.find(r => r.name === 'Jamaican Curry Chicken');
          if (jamaicanRecipe) showRecipeCard(jamaicanRecipe);
          cookingArea.innerHTML = ''; // reset game area
          resultMessage.textContent = '';
        }, 1500);
      } else {
        resultMessage.textContent = '';
      }
    }

    // Reset game button
    resetBtn.addEventListener('click', () => {
      populateGame();
      cookingArea.innerHTML = '';
      resultMessage.textContent = '';
      instructionsEl.textContent = 'Drag the ingredients and steps in the correct order into the cooking area below to prepare the dish.';
    });

    // Setup drag event listeners for ingredients and actions
    function addDragListeners(container) {
      container.querySelectorAll('div').forEach(div => {
        div.addEventListener('dragstart', dragStart);
        div.addEventListener('dragend', dragEnd);
      });
    }

    // Setup drag listeners for cooking area for reorder
    cookingArea.addEventListener('dragover', dragOverCooking);
    cookingArea.addEventListener('drop', dropCooking);

    // Setup drop for cooking area
    cookingArea.addEventListener('dragover', e => e.preventDefault());
    cookingArea.addEventListener('drop', drop);

    // Populate and add listeners initially
    populateGame();
    addDragListeners(ingredientsContainer);
    addDragListeners(actionsContainer);

    // Add listeners dynamically when items are added
    const observer = new MutationObserver(() => {
      addDragListeners(ingredientsContainer);
      addDragListeners(actionsContainer);
    });
    observer.observe(ingredientsContainer, { childList: true });
    observer.observe(actionsContainer, { childList: true });

    // --- Sparkly Cursor Logic ---
    const cursorGlow = document.getElementById('cursorGlow');

    function createSparkle(x, y) {
      const sparkle = document.createElement('div');
      sparkle.classList.add('sparkle');
      sparkle.style.left = `${x}px`;
      sparkle.style.top = `${y}px`;
      document.body.appendChild(sparkle);
      setTimeout(() => sparkle.remove(), 1500);
    }

    window.addEventListener('mousemove', e => {
      cursorGlow.style.left = `${e.clientX}px`;
      cursorGlow.style.top = `${e.clientY}px`;
      if (Math.random() < 0.3) {
        createSparkle(e.clientX + (Math.random() * 20 - 10), e.clientY + (Math.random() * 20 - 10));
      }
    });

    // Accessibility: Keyboard tab outline on first Tab press
    document.addEventListener('keydown', e => {
      if (e.key === 'Tab') {
        document.body.classList.add('user-is-tabbing');
      }
    });
  </script>
</body>
</html>
